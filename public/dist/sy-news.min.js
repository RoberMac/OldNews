angular.module("ShinyaNews",["ngTouch","ngAnimate","angular-storage","ShinyaNews.timeHelperServices"]).factory("oneDayStore",["store",function(e){return e.getNamespacedStore("one-day-news","-")}]).controller("rootController",["$scope","$http","$timeout","$window","store","oneDayStore","syNewsTimeHelper",function(e,t,s,o,n,l,a){function i(o){var n,a=o.selectDate+e.selectCountry;return e.newsBox=[],e.isShow=!1,e.isNewsExist=!0,(n=o.isAllDay?N[a]:l.get(a))?(e.newsBox=n,e.isShow=!0,void(e.isNewsExist=!0)):void t.post("/api/getSelectedDateNews",o).success(function(t,o,n,l){l.data.isAllDay?N[a]=t.msg:r(a,t.msg),s(function(){e.newsBox=t.msg,e.isShow=!0,e.isNewsExist=!0},717)}).error(function(t,o,n,l){s(function(){e.newsBox=[],e.isShow=!0,e.isNewsExist=!1},717)})}function c(){var t=e.selectNewsInfo.selectDate;e.isHideCaretLeft=t-36e5===a.getLocalDayMs(new Date)?!0:!1,e.isHideCaretRight=t+36e5>Date.now()?!0:!1}function w(){var t=e.selectOldNewsInfo.selectDate;e.isHideCaretRight=t+1728e5>Date.now()?!0:!1}function r(e,t){l.set(e,t);var s=Date.now()+864e5;n.set("oneDayNewsExpires",a.getLocalDayMs(s))}function u(){for(var e=o.localStorage,t=localStorage.length,s=/^one-day-news-/,l=0,a=0;t>a;a++)s.test(e.key(l))?n.remove(e.key(l)):l++}e.isShow=!1,e.isNewsExist=!0,e.isOldNews=!1,e.toggleNews=function(){e.isOldNews=!e.isOldNews,angular.element(document.documentElement).toggleClass("oldNews"),e.isOldNews?(w(),i(e.selectOldNewsInfo)):(c(),i(e.selectNewsInfo))};var N={};e.newsBox=[],e.selectCountry="CN",e.selectNewsInfo={selectDate:a.getUTCDayMs(new Date)+36e5*(new Date).getUTCHours(),selectCountry:e.selectCountry,isAllDay:!1},e.selectOldNewsInfo={selectDate:a.getLocalDayMs(Date.now())-864e5,selectCountry:e.selectCountry,isAllDay:!0},e.isHideCaretLeft=!1,e.isHideCaretRight=!1,e.selectNews=function(t){e.isOldNews?(e.selectOldNewsInfo.selectDate+=864e5*t,i(e.selectOldNewsInfo),w()):(e.selectNewsInfo.selectDate+=36e5*t,i(e.selectNewsInfo),c())},c(),i(e.selectNewsInfo),n.get("oneDayNewsExpires")<Date.now()?u():null}]);
angular.module("ShinyaNews.timeHelperServices",[]).service("syNewsTimeHelper",function(){this.getUTCDayMs=function(e){var e=new Date(e);return Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate())},this.getLocalDayMs=function(e){var e=new Date(e);return Date.parse(new Date(e.getFullYear(),e.getMonth(),e.getDate()))}});
//# sourceMappingURL=sy-news.min.js.map