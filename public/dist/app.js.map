{"version":3,"sources":["entry.js","templates.js","Nav/Nav.js","NewsBox/NewsBox.js","TimeMachine/TimeMachine.js","utils.js","controllers/rootCtrl.js","directives/syAutofocus.js","directives/syIcon.js","directives/syStopPropagation.js","services/Animate.js","services/FetchNews.js","services/TimeHelper.js"],"names":["config","$locationProvider","$stateProvider","$urlRouterProvider","otherwise","now","Date","year","getFullYear","month","getMonth","day","getDate","h","getHours","country","JSON","parse","localStorage","getItem","html5Mode","state","url","join","templateUrl","controller","controllerAs","$inject","angular","module","run","$templateCache","put","syNav","restrict","replace","NavCtrl","$scope","$window","$timeout","$state","$stateParams","store","COUNTRIES","TIME","TimeHelper","Animate","selectNews","step","isOldNews","rootVM","newsDate","newsDateMs","vm","isShowCaretRight","isShowCaretLeft","toggleDirection","nextDate","dateFormatter","ONE_DAY","go","q","nextHour","parseInt","checkCaret","TWO_DAYS","ONE_HOUR","todayMs","togglehNewsType","cardFlip","nowHourMs","hour","handleCountryClick","newCountry","toggleCountryList","activeCounty","countryList","cache","length","forEach","push","hideCountryList","preList","copy","index","indexOf","splice","unshift","this","get","element","on","e","target","tagName","toLowerCase","keyCode","$on","event","payload","constant","directive","NewsBoxCtrl","$rootScope","$location","FetchNews","updateState","newState","merge","updateQueryParam","title","searchText","notify","reload","handleSwipe","$broadcast","initState","isToday","date","set","isFetching","isFetchFail","news","data","then","newsData","$watch","newVal","oldVal","syTimeMachine","TimeMachineCtrl","toggleTimeMachine","timeMachine","Y","M","D","H","isShowTimeMachine","handleSubmit","formValidation","expectDate","form","$setValidity","$watchCollection","rootCtrl","autoFocus","link","$elem","$attr","focus","syIcon","template","viewBox","viewbox","name","stopPropagation","elem","document","querySelector","addClass","removeClass","factory","NewsStore","newsID","newsStore","removeAll","ls","len","reg","j","i","test","key","remove","getNamespacedStore","OldNewsStore","$cacheFactory","$q","$http","newsId","localNewsData","resolve","reject","post","selectDate","selectCountry","isAllDay","success","status","headers","msg","error","dateMs"],"mappings":"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","file":"app.js","sourcesContent":["\nconfig.$inject = [\"$locationProvider\", \"$stateProvider\", \"$urlRouterProvider\"];angular\n.module('ShinyaNews', [\n    // Vendors\n    'ngTouch',\n    'ngAnimate',\n    'ui.router',\n    'angular-storage',\n    // App\n    'ShinyaNews.utils.controllers',\n    'ShinyaNews.utils.services',\n    'ShinyaNews.utils.directives',\n    'ShinyaNews.components.NewsBox',\n    'ShinyaNews.components.TimeMachine',\n    'ShinyaNews.components.Nav',\n    'ShinyaNews.templates',\n])\n.config(config);\n\nfunction config($locationProvider, $stateProvider, $urlRouterProvider) {\n\n    $urlRouterProvider.otherwise(function() {\n        var now     = new Date();\n        var year    = now.getFullYear();\n        var month   = now.getMonth() + 1;\n        var day     = now.getDate();\n        var h       = now.getHours();\n        var country = JSON.parse(localStorage.getItem('syNewsCountry')) || \"HK\";\n        return country + '/' + year + '/' + month + '/' + day + '?h=' + h;\n    });\n\n    $locationProvider.html5Mode(true);\n\n    $stateProvider\n    .state('news', {\n        url: [\n            '/{country:BR|CN|DE|FR|HK|IN|JP|KR|RU|TW|US}', // Country\n            '/{year:201[5-6]}', // Year\n            '/{month:0?[1-9]|1[0-2]}', // Month\n            '/{day:0?[0-9]|[12][0-9]|3[0-1]}', // Day\n            '?h', // Hour\n            '&q', // Search\n        ].join(''),\n        templateUrl: 'components/NewsBox/NewsBox.html',\n        controller: 'NewsBoxCtrl',\n        controllerAs: 'newsVM'\n    })\n}","angular.module(\"ShinyaNews.templates\", []).run([\"$templateCache\", function($templateCache) {$templateCache.put(\"components/Nav/Caret.html\",\"<div>\\n\\n    <button\\n        ng-if=\\\"navVM.state.isShowCaretLeft\\\"\\n        ng-click=\\\"navVM.selectNews(-1)\\\"\\n        class=\\\"btn--caret btn--caret--left tips--deep animate--faster\\\"\\n    >\\n        <sy-icon name=\\\"caret-left\\\"></sy-icon>\\n    </button>\\n\\n    <button\\n        ng-if=\\\"navVM.state.isShowCaretRight\\\"\\n        ng-click=\\\"navVM.selectNews(1)\\\"\\n        class=\\\"btn--caret btn--caret--right tips--deep animate--faster\\\"\\n    >\\n        <sy-icon name=\\\"caret-right\\\"></sy-icon>\\n    </button>\\n\\n</div>\");\n$templateCache.put(\"components/Nav/ChooseCountry.html\",\"<div class=\\\"btn--t--l animate--faster\\\">\\n    <ul>\\n        <li ng-repeat=\\\"country in navVM.state.countryList\\\" class=\\\"animate--faster\\\">\\n            <button\\n                class=\\\"btn--country shadow animate--faster {{ \\'btn--country--\\' + country }}\\\"\\n                ng-click=\\\"navVM.handleCountryClick(country)\\\"\\n            >\\n                {{::country}}\\n            </button>\\n        </li>\\n    </ul>\\n</div>\");\n$templateCache.put(\"components/Nav/ClickableLogo.html\",\"<button class=\\\"btn--t--r\\\" ng-click=\\\"navVM.togglehNewsType()\\\">\\n    <span class=\\\"btn--logo animate--general\\\" alt=\\\"logo\\\"></span>\\n</button>\");\n$templateCache.put(\"components/Nav/Nav.html\",\"<div>\\n\\n    <div ng-include=\\\"\\'components/Nav/Caret.html\\'\\\"></div>\\n    <div ng-include=\\\"\\'components/Nav/ClickableLogo.html\\'\\\"></div>\\n    <div ng-include=\\\"\\'components/Nav/ChooseCountry.html\\'\\\"></div>\\n\\n<div>\");\n$templateCache.put(\"components/NewsBox/FetchState.html\",\"<!-- Not Found -->\\n<div ng-if=\\\"newsVM.state.isFetchFail\\\" class=\\\"newsState--fetchFail animate--general\\\">\\n    <sy-icon name=\\\"NotFound\\\" viewbox=\\\"0 0 474 584\\\"></sy-icon>\\n</div>\\n\\n<!-- Spin -->\\n<div ng-if=\\\"newsVM.state.isFetching\\\" class=\\\"newsState--fetching animate--general\\\"></div>\\n\");\n$templateCache.put(\"components/NewsBox/Heading.html\",\"<h3>\\n    <span>\\n        <span ng-if=\\\"!rootVM.state.isOldNews\\\">{{newsVM.state.news.date | date:\\'HH:00\\'}}</span>\\n        <span ng-if=\\\"rootVM.state.isOldNews\\\">{{newsVM.state.news.date | date:\\'yyyy-MM-dd\\'}}</span>\\n    </span>\\n</h3>\");\n$templateCache.put(\"components/NewsBox/NewsBox.html\",\"<div\\n    class=\\\"newsBox animate--general shadow\\\"\\n    ng-swipe-left=\\\"newsVM.handleSwipe(1)\\\"\\n    ng-swipe-right=\\\"newsVM.handleSwipe(-1)\\\"\\n    ng-swipe-disable-mouse\\n>\\n\\n    <!-- Heading -->\\n    <div ng-include=\\\"\\'components/NewsBox/Heading.html\\'\\\"></div>\\n\\n    <!-- Content -->\\n    <div class=\\\"newsBox__content overflow--y\\\">\\n\\n        <div ng-if=\\\"newsVM.state.news.data.length > 0\\\">\\n            <div ng-include=\\\"\\'components/NewsBox/SearchBar.html\\'\\\"></div>\\n        </div>\\n\\n        <div ng-if=\\\"newsVM.state.news.data.length > 0\\\" ng-include=\\\"\\'components/NewsBox/NewsItem.html\\'\\\"></div>\\n\\n        <div ng-include=\\\"\\'components/NewsBox/FetchState.html\\'\\\"></div>\\n\\n    </div>\\n</div>\");\n$templateCache.put(\"components/NewsBox/NewsItem.html\",\"<ul ng-repeat=\\\"sourceItem in newsVM.state.news.data | filter: newsVM.state.searchText\\\">\\n    <!-- Source: Provider -->\\n    <h4>{{::sourceItem.source_name}}</h4>\\n    <!-- Source: News -->\\n    <li\\n        ng-repeat=\\\"newsItem in sourceItem.news | orderBy: \\'date\\' | filter: newsVM.state.searchText\\\"\\n        class=\\\"newsItem\\\"\\n    >\\n\\n        <!-- News: Created At -->\\n        <span class=\\\"newsItem__createdAt\\\">{{::newsItem.date | date: \\'HH:mm\\'}}</span>\\n        <!-- News: Title -->\\n        <a class=\\\"newsItem__title\\\" ng-href=\\\"{{::newsItem.url}}\\\" target=\\\"_blank\\\">{{::newsItem.title}}</a>\\n        <!-- News: Source Link -->\\n        <button ng-click=\\\"newsVM.updateQueryParam(newsItem.title)\\\" class=\\\"newsItem__link\\\">\\n            <sy-icon name=\\\"link\\\"></sy-icon>\\n        </button>\\n\\n    </li>\\n</ul>\");\n$templateCache.put(\"components/NewsBox/SearchBar.html\",\"<form class=\\\"searchBar\\\" novalidate name=\\\"searchForm\\\">\\n\\n    <input\\n        class=\\\"searchBar__input animate--faster\\\"\\n        ng-class=\\\"{\\'searchBar__input--valid\\': searchForm.$valid}\\\"\\n        ng-model=\\\"newsVM.state.searchText\\\"\\n        ng-model-options=\\\"{ debounce: 300 }\\\"\\n        type=\\\"text\\\"\\n        required\\n    >\\n\\n</form>\");\n$templateCache.put(\"components/TimeMachine/Form.html\",\"<form\\n    sy-stop-propagation\\n    ng-submit=\\\"tmVM.handleSubmit()\\\"\\n    class=\\\"timeMachine__form shadow animate--faster\\\"\\n    name=\\\"tmVM.form\\\"\\n    novalidate\\n>\\n    <div ng-if=\\\"!rootVM.state.isOldNews\\\">\\n        <input\\n            sy-auto-focus\\n            type=\\\"number\\\"\\n            placeholder=\\\"H\\\"\\n            ng-model=\\\"tmVM.state.timeMachine.H\\\"\\n            ng-model-options=\\\"{ debounce: 300 }\\\"\\n            class=\\\"timeMachine__input shadow--onFocus animate--faster\\\"\\n            min=\\\"1\\\"\\n            max=\\\"24\\\"\\n            required\\n        >\\n        <span>:</span>\\n        <input\\n            class=\\\"timeMachine__input shadow--onFocus animate--faster\\\"\\n            type=\\\"number\\\"\\n            placeholder=\\\"00\\\"\\n            disabled\\n        >\\n    </div>\\n    <div ng-if=\\\"rootVM.state.isOldNews\\\">\\n        <input\\n            class=\\\"timeMachine__input shadow--onFocus animate--faster\\\"\\n            ng-model=\\\"tmVM.state.timeMachine.Y\\\"\\n            ng-model-options=\\\"{ debounce: 300 }\\\"\\n            type=\\\"number\\\"\\n            placeholder=\\\"Y\\\"\\n            min=\\\"15\\\"\\n            max=\\\"16\\\"\\n            required\\n        >\\n        <span>-</span>\\n        <input\\n            class=\\\"timeMachine__input shadow--onFocus animate--faster\\\"\\n            ng-model=\\\"tmVM.state.timeMachine.M\\\"\\n            ng-model-options=\\\"{ debounce: 300 }\\\"\\n            type=\\\"number\\\"\\n            placeholder=\\\"M\\\"\\n            min=\\\"1\\\"\\n            max=\\\"12\\\"\\n            required\\n        >\\n        <span>-</span>\\n        <input\\n            class=\\\"timeMachine__input shadow--onFocus animate--faster\\\"\\n            ng-model=\\\"tmVM.state.timeMachine.D\\\"\\n            ng-model-options=\\\"{ debounce: 300 }\\\"\\n            sy-auto-focus\\n            type=\\\"number\\\"\\n            placeholder=\\\"D\\\"\\n            min=\\\"1\\\"\\n            max=\\\"31\\\"\\n            required\\n        >\\n    </div>\\n</form>\");\n$templateCache.put(\"components/TimeMachine/TimeMachine.html\",\"<div>\\n    <!-- Time Machine: Start Button -->\\n    <button ng-click=\\\"tmVM.toggleTimeMachine()\\\" class=\\\"btn--timeMachine tips--deep animate--faster\\\">\\n        <sy-icon name=\\\"time_machine\\\"></sy-icon>\\n    </button>\\n\\n    <!-- Time Machine: Content -->\\n    <div\\n        ng-if=\\\"tmVM.state.isShowTimeMachine\\\"\\n        ng-click=\\\"tmVM.toggleTimeMachine()\\\"\\n        class=\\\"timeMachine vertically_center animate--faster\\\"\\n    >\\n            <div class=\\\"timeMachine__content animate--general\\\">\\n                <div ng-include=\\\"\\'components/TimeMachine/Form.html\\'\\\"></div>\\n                <div ng-include=\\\"\\'components/TimeMachine/ToolBar.html\\'\\\"></div>\\n            </div>\\n    </div>\\n</div>\");\n$templateCache.put(\"components/TimeMachine/ToolBar.html\",\"<div sy-stop-propagation>\\n    <button\\n        ng-if=\\\"!tmVM.form.$invalid\\\"\\n        ng-click=\\\"tmVM.handleSubmit()\\\"\\n        class=\\\"timeMachine__btn tips animate--faster\\\"\\n    >\\n        <sy-icon name=\\\"ok\\\"></sy-icon>\\n    </button>\\n    <button\\n        ng-click=\\\"tmVM.toggleTimeMachine()\\\"\\n        class=\\\"timeMachine__btn tips animate--faster\\\"\\n    >\\n        <sy-icon name=\\\"cancel\\\"></sy-icon>\\n    </button>\\n</div>\");}]);","\nNavCtrl.$inject = [\"$scope\", \"$window\", \"$timeout\", \"$state\", \"$stateParams\", \"store\", \"COUNTRIES\", \"TIME\", \"TimeHelper\", \"Animate\"];angular\n.module('ShinyaNews.components.Nav', [])\n.constant('COUNTRIES', ['HK', 'CN', 'JP', 'TW', 'US', 'BR', 'IN', 'KR', 'RU', 'DE', 'FR'])\n.directive('syNav', syNav);\n\n\nfunction syNav(){\n    return {\n        restrict: 'E',\n        replace: true,\n        controller: NavCtrl,\n        controllerAs: 'navVM',\n        templateUrl: 'components/Nav/Nav.html'\n    };\n}\nfunction NavCtrl(\n    $scope, $window, $timeout,\n    $state, $stateParams, store,\n    COUNTRIES, TIME, TimeHelper, Animate\n){\n\n    var vm = this;\n    this.state = {\n        isShowCaretLeft: true,\n        isShowCaretRight: true,\n        countryList: [store.get('syNewsCountry') || 'HK']\n    };\n    vm.selectNews = selectNews;\n    vm.togglehNewsType = togglehNewsType;\n    vm.handleCountryClick = handleCountryClick;\n\n    // Events\n    angular.element($window).on('keydown', function(e) {\n        if (e.target.tagName.toLowerCase() === 'input') return;\n\n        switch (e.keyCode) {\n            case 37: // ←\n                vm.selectNews(-1)\n                break;\n            case 39: // →\n                vm.selectNews(1)\n                break;\n        }\n    })\n    $scope.$on('selectNews', function (event, payload){\n        vm.selectNews(payload.step)\n    })\n    $scope.$on('checkCaret', function (event, payload){\n        checkCaret()\n    })\n\n\n    function selectNews(step) {\n        var isOldNews = $scope.rootVM.state.isOldNews;\n        var newsDate = TimeHelper.newsDateMs(isOldNews);\n\n        // 屏蔽（移動端／鍵盤操作）無效的獲取新聞（滑動）\n        if (step === 1 && !vm.state.isShowCaretRight || step === -1 && !vm.state.isShowCaretLeft) return;\n\n        Animate.toggleDirection(step)\n\n        switch (isOldNews) {\n            case true:\n                var nextDate = TimeHelper.dateFormatter(newsDate + TIME.ONE_DAY * step);\n                $state.go('news', {\n                    year : nextDate.year,\n                    month: nextDate.month,\n                    day  : nextDate.day,\n                    h    : null,\n                    q    : null\n                });\n                break;\n            case false:\n                var nextHour = parseInt($stateParams.h || new Date().getHours()) + step;\n                $state.go('news', {\n                    h: nextHour,\n                    q: null\n                })\n                break;\n        }\n    }\n    function checkCaret() {\n        var isOldNews = $scope.rootVM.state.isOldNews;\n        var newsDate = TimeHelper.newsDateMs(isOldNews);\n\n        switch (isOldNews) {\n            case true:\n                // Always Show Left\n                vm.state.isShowCaretLeft = true;\n                // Before Today\n                vm.state.isShowCaretRight = newsDate + TIME.TWO_DAYS <= Date.now();\n                break;\n            case false:\n                // After 0:00\n                vm.state.isShowCaretLeft = newsDate - TIME.ONE_HOUR !== TimeHelper.todayMs();\n                // Before Now Hour\n                vm.state.isShowCaretRight = newsDate + TIME.ONE_HOUR <= Date.now();\n                break;\n        }\n    }\n    function togglehNewsType() {\n        Animate.cardFlip()\n\n        var isOldNews = $scope.rootVM.state.isOldNews;\n        var now;\n        switch (isOldNews){\n            // =>「新聞，」\n            case true:\n                now = TimeHelper.nowHourMs();\n                isOldNews = false\n                break;\n            // =>「舊聞。」\n            case false:\n                now = TimeHelper.todayMs() - TIME.ONE_DAY;\n                isOldNews = true\n                break;\n        }\n        now = TimeHelper.dateFormatter(now);\n\n        $state.go('news', {\n            year : now.year,\n            month: now.month,\n            day  : now.day,\n            h    : isOldNews ? null : now.hour,\n            q    : null\n        });\n    }\n    function handleCountryClick(newCountry) {\n        switch (newCountry === vm.state.countryList[0]) {\n            // Select Country\n            case true:\n                toggleCountryList(newCountry)\n                break;\n            // Change Country\n            case false:\n                $state.go('news', { country: newCountry })\n                hideCountryList(newCountry)\n                break;\n        }\n\n\n        function toggleCountryList(newCountry) {\n            var activeCounty = vm.state.countryList[0];\n            var cache = [activeCounty];\n\n            switch (vm.state.countryList.length === 1) {\n                // Show Country List\n                case true:\n                    COUNTRIES.forEach(function(country) {\n                        activeCounty !== country && cache.push(country);\n                    })\n                    vm.state.countryList = cache;\n                    break;\n                // Hide Country List\n                case false:\n                    hideCountryList(newCountry)\n                    break;\n            }\n        }\n        function hideCountryList(newCountry) {\n            // Insert newCountry to No.1\n            var preList = angular.copy(vm.state.countryList);\n            var index = preList.indexOf(newCountry);\n            preList.splice(index, 1)\n            preList.unshift(newCountry)\n            vm.state.countryList = preList;\n\n            // Hide Coutry List\n            $timeout(function (){\n                if (newCountry === preList[0]){\n                    vm.state.countryList = [newCountry]\n                }\n            })\n        }\n    }\n}","\nNewsBoxCtrl.$inject = [\"$rootScope\", \"$scope\", \"$window\", \"$location\", \"$state\", \"$stateParams\", \"store\", \"TimeHelper\", \"FetchNews\"];angular\n.module('ShinyaNews.components.NewsBox', [])\n.controller('NewsBoxCtrl', NewsBoxCtrl)\n\n\nfunction NewsBoxCtrl(\n    $rootScope, $scope, $window, $location,\n    $state, $stateParams, store,\n    TimeHelper, FetchNews\n){\n\n    var vm = this;\n    vm.state = {\n        isFetching: true,\n        isFetchFail: false,\n        news: {\n            data: [],\n            country: '',\n            date: 0\n        },\n        searchText: $stateParams.q\n    };\n    vm.updateState = updateState;\n    vm.updateQueryParam = updateQueryParam;\n    vm.handleSwipe = handleSwipe;\n\n    initState()\n    // Events\n    angular.element($window).on('keydown', function(e) {\n        switch (e.keyCode) {\n            case 27: // Esc\n                vm.updateQueryParam('')\n                break;\n        }\n    })\n    $scope.$watch('newsVM.state.searchText', function(newVal, oldVal) {\n        if (newVal !== oldVal){\n            vm.updateQueryParam(newVal)\n        }\n    })\n\n\n    function updateState(newState) {\n        angular.merge(vm.state, newState)\n    }\n    function updateQueryParam(title) {\n        vm.updateState({ searchText: title })\n        $state.go('news', {\n            q: title\n        }, { notify: false, reload: true })\n    }\n    function handleSwipe(step){\n        $rootScope.$broadcast('selectNews', { step: step })\n    }\n    function initState() {\n        var country = $stateParams.country;\n        var isOldNews = !TimeHelper.isToday();\n        var date = TimeHelper.newsDateMs(isOldNews);\n\n        // Reset State\n        store.set('syNewsCountry', country)\n        vm.updateState({\n            isFetching: true,\n            isFetchFail: false,\n            news: {\n                data: [],\n                country: country,\n                date: date\n            }\n        })\n        $scope.rootVM.updateState({\n            isOldNews: isOldNews\n        })\n\n        // Start Fetch News\n        FetchNews(date, country, isOldNews)\n        .then(function(newsData) {\n            vm.updateState({\n                isFetching: false,\n                isFetchFail: false,\n                news: { data: newsData }\n            })\n        })\n        .catch(function() {\n            vm.updateState({\n                isFetching: false,\n                isFetchFail: true\n            })\n        })\n\n        // Check Caret\n        $rootScope.$broadcast('checkCaret')\n    }\n}","\nTimeMachineCtrl.$inject = [\"$scope\", \"$state\", \"$stateParams\", \"TimeHelper\", \"Animate\"];angular\n.module('ShinyaNews.components.TimeMachine', [])\n.directive('syTimeMachine', syTimeMachine);\n\n\nfunction syTimeMachine() {\n    return {\n        restrict: 'E',\n        replace: true,\n        controller: TimeMachineCtrl,\n        controllerAs: 'tmVM',\n        templateUrl: 'components/TimeMachine/TimeMachine.html'\n    }\n}\nfunction TimeMachineCtrl($scope, $state, $stateParams, TimeHelper, Animate) {\n    var vm = this;\n    vm.state = {\n        isShowTimeMachine: false,\n        timeMachine: {\n            Y: 0,\n            M: 0,\n            D: 0,\n            H: 0\n        },\n\n    };\n    vm.toggleTimeMachine = toggleTimeMachine;\n    vm.handleSubmit = handleSubmit;\n\n    $scope.$watchCollection('tmVM.state.timeMachine', formValidation)\n\n\n    function toggleTimeMachine() {\n        // Init Time Machine Date info\n        var newsDate = TimeHelper.newsDateMs($scope.rootVM.state.isOldNews);\n        var now = TimeHelper.dateFormatter(newsDate);\n        vm.state.timeMachine = {\n            Y: now.year % 2000,\n            M: now.month,\n            D: now.day,\n            H: now.hour\n        };\n        // Show / Hide Time Machine\n        vm.state.isShowTimeMachine = !vm.state.isShowTimeMachine\n    }\n    function handleSubmit() {\n        switch ($scope.rootVM.state.isOldNews) {\n            // Only Change `Year`, `Month` and `Day`\n            case true:\n                vm.state.timeMachine.M <= $stateParams.month && vm.state.timeMachine.D <= $stateParams.day\n                    ? Animate.toggleDirection(-1)\n                : Animate.toggleDirection(1)\n\n                $state.go('news', {\n                    year : '20' + vm.state.timeMachine.Y,\n                    month: vm.state.timeMachine.M,\n                    day  : vm.state.timeMachine.D,\n                    h    : null,\n                    q    : null\n                })\n                break;\n            // Only Change `Hour`\n            case false:\n                var h = vm.state.timeMachine.H;\n\n                h <= $stateParams.h ? Animate.toggleDirection(-1) : Animate.toggleDirection(1)\n\n                $state.go('news', { h: h, q: null })\n                break;\n        }\n        // Hide Time Machine\n        vm.state.isShowTimeMachine = false\n    }\n    function formValidation(newVal, oldVal) {\n        var expectDate;\n\n        switch ($scope.rootVM.state.isOldNews) {\n            case true:\n                expectDate = (\n                    Date.parse(\n                        new Date(\n                            '20' + vm.state.timeMachine.Y,\n                            vm.state.timeMachine.M - 1,\n                            vm.state.timeMachine.D\n                        )\n                    )\n                );\n                break;\n            case false:\n                expectDate = (\n                    Date.parse(\n                        new Date(\n                            new Date().getFullYear(),\n                            new Date().getMonth(),\n                            new Date().getDate(),\n                            vm.state.timeMachine.H\n                        )\n                    )\n                );\n                break;\n        }\n\n        vm.form && vm.form.$setValidity('maxDate', expectDate <= Date.now())\n    }\n}","angular.module('ShinyaNews.utils.controllers', []);\nangular.module('ShinyaNews.utils.services', []);\nangular.module('ShinyaNews.utils.directives', []);","angular\n.module('ShinyaNews.utils.controllers')\n.controller('rootCtrl', rootCtrl);\n\n\nfunction rootCtrl(){\n    var vm = this;\n    vm.state = {\n        isOldNews: false\n    };\n    vm.updateState = updateState;\n\n    function updateState(newState) {\n        angular.merge(vm.state, newState)\n    }\n}","angular\n.module('ShinyaNews.utils.directives')\n.directive('syAutoFocus', autoFocus);\n\n\nfunction autoFocus() {\n    return {\n        restrict: 'A',\n        link: function($scope, $elem, $attr) {\n            $elem[0].focus()\n        }\n    }\n}","angular\n.module('ShinyaNews.utils.directives')\n.directive('syIcon', syIcon);\n\n\nfunction syIcon() {\n    return {\n        restrict: 'E',\n        replace: true,\n        template: function($elem, $attr) {\n            var viewBox = $attr.viewbox || \"0 0 100 100\";\n            var name = $attr.name;\n\n            return [\n                '<svg viewBox=\"' + viewBox + '\">',\n                    '<use xlink:href=\"/public/img/icon-sprites.svg#' + name + '\"></use>',\n                '</svg>',\n            ].join('');\n        }\n    }\n}","angular\n.module('ShinyaNews.utils.directives')\n.directive('syStopPropagation', stopPropagation);\n\n\nfunction stopPropagation() {\n    return {\n        restrict: 'A',\n        link: function($scope, $elem, $attr) {\n            $elem.on('click', stopPropagation)\n            $elem.on('touchstart', stopPropagation)\n\n            function stopPropagation(e) {\n                e.stopPropagation()\n            }\n        }\n    }\n}","\nAnimate.$inject = [\"$timeout\"];angular\n.module('ShinyaNews.utils.services')\n.factory('Animate', Animate);\n\n\nfunction Animate($timeout){\n    return {\n        cardFlip: cardFlip,\n        toggleDirection: toggleDirection\n    };\n\n\n    // 翻面動畫\n    function cardFlip(){\n        var elem = angular.element(document.querySelector('.ui-view-newsBox'));\n\n        elem.addClass('cardFlip')\n\n        $timeout(function (){\n            elem.removeClass('cardFlip')\n        }, 777)\n    }\n    // 切換新聞轉換方向\n    function toggleDirection(step){\n        var elem = angular.element(document.querySelector('.ui-view-newsBox'));\n\n        if (step === 1){\n            elem.removeClass('rtl')\n        } else {\n            elem.addClass('rtl')\n        }\n    }\n}","\nNewsStore.$inject = [\"$window\", \"store\", \"TimeHelper\", \"TIME\"];\nOldNewsStore.$inject = [\"$cacheFactory\"];\nFetchNews.$inject = [\"$q\", \"$http\", \"NewsStore\", \"OldNewsStore\"];angular\n.module('ShinyaNews.utils.services')\n.factory('NewsStore', NewsStore)\n.factory('OldNewsStore', OldNewsStore)\n.factory('FetchNews', FetchNews)\n.run([\"store\", \"NewsStore\", function (store, NewsStore){\n    // 刪除緩存於本地的過期信息\n    store.get('oneDayNewsExpires') < Date.now() && NewsStore.removeAll()\n}]);\n\n\nfunction NewsStore($window, store, TimeHelper, TIME){\n    var newsStore = store.getNamespacedStore('one-day-news', '-');\n\n    return {\n        get: get,\n        set: set,\n        removeAll: removeAll,\n    };\n\n\n    function get(newsID) {\n        return newsStore.get(newsID)\n    }\n    // 存储新闻与本地並設置過期時間\n    function set(newsID, news) {\n        newsStore.set(newsID, news)\n        store.set('oneDayNewsExpires', TimeHelper.todayMs() + TIME.ONE_DAY)\n    }\n    // 清除過期的新聞\n    function removeAll() {\n        var ls = $window.localStorage,\n            len = localStorage.length,\n            reg = /^one-day-news-/,\n            j = 0;\n        for (var i = 0; i < len; i++){\n            reg.test(ls.key(j))\n                ? store.remove(ls.key(j))\n                : j ++\n        }\n    }\n}\nfunction OldNewsStore($cacheFactory) {\n    return $cacheFactory('OldNewsStore')\n}\nfunction FetchNews($q, $http, NewsStore, OldNewsStore){\n    return function(date, country, isOldNews) {\n        var newsId = date + country;\n        var localNewsData = isOldNews ? OldNewsStore.get(newsId) : NewsStore.get(newsId);\n\n        return $q(function (resolve, reject){\n            if (!date || !country) {\n                reject('invalid params')\n                return;\n            };\n            // Fetch From Local\n            if (localNewsData) {\n                resolve(localNewsData)\n            }\n            // Fetch From Remote\n            else {\n                $http\n                .post('/api/getSelectedDateNews', {\n                    selectDate: date,\n                    selectCountry: country,\n                    isAllDay: isOldNews\n                })\n                .success(function (data, status, headers, config){\n                    switch (isOldNews) {\n                        case true:\n                            OldNewsStore.put(newsId, data.msg)\n                            break;\n                        case false:\n                            NewsStore.set(newsId, data.msg)\n                            break;\n                    }\n\n                    resolve(data.msg)\n                })\n                .error(function (data, status, headers, config){\n                    reject()\n                })\n            }\n        });\n    }\n}","\nTimeHelper.$inject = [\"$stateParams\"];angular\n.module('ShinyaNews.utils.services')\n.constant('TIME', {\n    ONE_HOUR: 1000 * 60 * 60,\n    ONE_DAY: 1000 * 60 * 60 * 24,\n    TWO_DAYS: 1000 * 60 * 60 * 48,\n})\n.factory('TimeHelper', TimeHelper);\n\n\nfunction TimeHelper($stateParams){\n    return {\n        nowHourMs: nowHourMs,\n        todayMs: todayMs,\n        newsDateMs: newsDateMs,\n        isToday: isToday,\n        dateFormatter: dateFormatter\n    };\n\n\n    function nowHourMs() {\n        var date = new Date();\n        return Date.parse(\n            new Date(\n                date.getFullYear(),\n                date.getMonth(),\n                date.getDate(),\n                date.getHours()\n            )\n        );\n    }\n    function todayMs() {\n        var date = new Date();\n        return  Date.parse(\n            new Date(\n                date.getFullYear(),\n                date.getMonth(),\n                date.getDate()\n            )\n        );\n    }\n    function newsDateMs(isOldNews){\n        var year    = $stateParams.year;\n        var month   = $stateParams.month;\n        var day     = $stateParams.day;\n        var hour    = $stateParams.h;\n\n        return Date.parse(new Date(year, month - 1, day, isOldNews ? null : hour));\n    }\n    function isToday() {\n        var year    = $stateParams.year;\n        var month   = $stateParams.month;\n        var day     = $stateParams.day;\n        var hour    = $stateParams.h;\n\n        var now = dateFormatter(Date.now());\n\n        return year == now.year && month == now.month && day == now.day;\n    }\n    function dateFormatter(dateMs) {\n        var date = new Date(dateMs);\n        return {\n            year : date.getFullYear(),\n            month: date.getMonth() + 1,\n            day  : date.getDate(),\n            hour : date.getHours()\n        };\n    }\n}"],"sourceRoot":"/source/"}