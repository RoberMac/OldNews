{"version":3,"sources":["core.js","syNews-i18n.js","syNews-stopPropagation.js","syNews-timeHelper.js"],"names":["angular","module","config","$locationProvider","$stateProvider","$urlRouterProvider","otherwise","now","Date","year","getFullYear","month","getMonth","day","getDate","h","getHours","country","localStorage","getItem","split","html5Mode","state","abstract","url","template","onEnter","console","log","parent","templateUrl","controller","$stateParams","hour","factory","store","getNamespacedStore","$scope","$http","$timeout","$window","oneDayStore","syNewsTimeHelper","setSelectNewsState","data","isShow","isNewsExist","newsBox","getSelectedDateNews","selectData","isPreload","isOldNews","checkSelectOldNewsCaret","checkSelectNewsCaret","cache_data","newsID","selectDate","selectCountry","lastStep","isHideCaretRight","isHideCaretLeft","isAllDay","newsBoxCache","get","post","success","status","headers","msg","storeOneDayNews","error","selectNewsInfo","getDayMs","selectOldNewsInfo","news","set","tomorrow","removeOneDayNews","ls","len","length","reg","j","i","test","key","remove","isShowTimeMachine","toggleNews","element","document","documentElement","toggleClass","refreshNews","toggleTimeMachine","timeMachineInfo","H","M","D","getHoursMs","selectNews","step","timeMachineSelectNews","$watch","newVal","oldVal","getElementsByClassName","scrollTop","directive","restrict","replace","showCountryList","country_list","cache","countryList","push","hideCountryList","index","indexOf","splice","unshift","changeLanguage","country_len","link","scope","elem","attr","bind","e","stopPropagation","service","this","date","parse"],"mappings":"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","file":"sy-news.min.js","sourcesContent":["angular.module('ShinyaNews', [\n    'ngTouch',\n    'ngAnimate',\n    'ui.router',\n    'angular-storage',\n    'ShinyaNews.stopPropagationDirective',\n    'ShinyaNews.i18nDirective',\n    'ShinyaNews.timeHelperServices'\n])\n.config(['$locationProvider', '$stateProvider', '$urlRouterProvider', \n    function($locationProvider, $stateProvider, $urlRouterProvider) {\n\n    $urlRouterProvider.otherwise(function (){\n        var now     = new Date(),\n            year    = now.getFullYear(),\n            month   = now.getMonth() + 1,\n            day     = now.getDate(),\n            h       = now.getHours(),\n            country = localStorage.getItem('syNewsCountry').split('\"')[1] || 'HK';\n\n        return country + '/' + year + '/' + month + '/' + day + '?h=' + h;\n    })\n\n    $locationProvider.html5Mode(true)\n\n    $stateProvider\n        .state('country', {\n            abstract: true,\n            url: \"/{country:BR|CN|DE|FR|HK|IN|JP|KR|RU|TW|US}\",\n            template: '<ui-view/>',\n            onEnter: function (){\n                console.log('...')\n            }\n        })\n        .state('date', {\n            parent: 'country',\n            url: \"/2015/{month:0?[1-9]|1[0-2]}/{day:0?[0-9]|[12][0-9]|3[0-1]}?h\",\n            templateUrl: '/public/dist/newsBox.min.html',\n            controller: ['$stateParams', function ($stateParams){\n\n                var country = $stateParams.country,\n                    month   = $stateParams.month,\n                    day     = $stateParams.day,\n                    hour    = $stateParams.h;\n\n                console.log(country, month, day, hour)\n            }]\n        })\n\n}])\n.factory('oneDayStore', ['store', function(store){\n    return store.getNamespacedStore('one-day-news', '-');\n}])\n.controller('rootController', [\n        '$scope', '$http', '$timeout', \n        '$window', 'store', 'oneDayStore', \n        'syNewsTimeHelper',\n    function ($scope, $http, $timeout, $window, store, oneDayStore, syNewsTimeHelper){\n\n    // 刪除緩存於本地的過期信息\n    store.get('oneDayNewsExpires') < Date.now()\n    ? removeOneDayNews()\n    : null\n\n    /*************\n     * 用戶介面相關\n     *\n     *  `$scope.isShow` 是否顯示 XXX（加載動畫、選擇新聞按鈕）\n     *  `$scope.isNewsExist` 是否顯示「獲取新聞錯誤」提醒\n     *  `$scope.isOldNews` & `$scope.toggleNews` 「新聞，」「舊聞。」切換\n     *  `$scope.isShowTimeMachine & $scope.toggleTimeMachine` 顯示／隱藏「跳躍性選擇新聞介面」\n     */\n    $scope.isShow = false\n    $scope.isNewsExist = true\n    $scope.isOldNews = false\n    $scope.isShowTimeMachine = false\n    $scope.toggleNews = function (){\n        $scope.isOldNews = !$scope.isOldNews\n        // 背景色\n        angular\n        .element(document.documentElement)\n        .toggleClass('oldNews')\n\n        $scope.refreshNews()\n    }\n    $scope.toggleTimeMachine = function (){\n        // 刷新時間\n        $scope.timeMachineInfo = {\n            H: new Date($scope.selectNewsInfo.selectDate).getHours(),\n            M: new Date($scope.selectOldNewsInfo.selectDate).getMonth() + 1,\n            D: new Date($scope.selectOldNewsInfo.selectDate).getDate()\n        }\n        $scope.isShowTimeMachine = !$scope.isShowTimeMachine\n    }\n\n\n    /*************\n     * 獲取新聞相關\n     *\n     *  `newsBoxCache` 緩存已獲取的新聞\n     *  `$scope.newsBox` 當前顯示的新聞\n     *  `$scope.selectNewsInfo` 存儲「新聞，」當前新聞日期信息\n     *  `$scope.selectOldNewsInfo` 存儲「舊聞。」當前新聞日期信息\n     *  `$scope.timeMachineInfo` 存儲「跳躍性選擇新聞」的日期信息\n     *  `$scope.isHideCaret--XXX` 是否隱藏選擇新聞按鈕\n     *  `$scope.selectNews` 選擇新聞\n     *  `$scope.timeMachineSelectNews` 「跳躍性選擇新聞」\n     *  `$scope.refreshNews` 刷新新聞\n     */\n    var newsBoxCache = {},\n        lastStep = -1;\n    $scope.newsBox = []\n    $scope.selectCountry = store.get('syNewsCountry') || 'HK'\n    $scope.selectNewsInfo = {\n        selectDate: oneDayStore.get('lastNewsDate') || syNewsTimeHelper.getHoursMs(new Date().getHours()),\n        selectCountry: $scope.selectCountry,\n        isAllDay: false\n    }\n    $scope.selectOldNewsInfo = {\n        selectDate: store.get('lastOldNewsDate') || syNewsTimeHelper.getDayMs(Date.now()) - 86400000,\n        selectCountry: $scope.selectCountry,\n        isAllDay: true\n    }\n    $scope.timeMachineInfo = {\n        H: new Date().getHours(),\n        M: new Date().getMonth() + 1,\n        D: new Date().getDate()\n    }\n    $scope.isHideCaretLeft  = false\n    $scope.isHideCaretRight = false\n    $scope.selectNews = function (step){\n        // 屏蔽（移動端）無效的獲取新聞（滑動）\n        if (step === 1 && $scope.isHideCaretRight || step === -1 && $scope.isHideCaretLeft){ return; }\n\n        if (!$scope.isOldNews){\n            // 選擇「新聞，」\n            $scope.selectNewsInfo.selectDate += 3600000 * step\n        } else {\n            // 選擇「舊聞。」\n            $scope.selectOldNewsInfo.selectDate += 86400000 * step\n        }\n\n        // 預加載判斷\n        if (step === lastStep){\n            getSelectedDateNews({\n                selectDate: $scope.isOldNews\n                                ? $scope.selectOldNewsInfo.selectDate + 86400000 * step\n                                : $scope.selectNewsInfo.selectDate + 3600000 * step,\n                selectCountry: $scope.selectCountry,\n                isAllDay: $scope.isOldNews ? true : false\n            }, true)\n        } else {\n            lastStep = step\n        }\n    }\n    $scope.timeMachineSelectNews = function (){\n        if (!$scope.isOldNews){\n            $scope.selectNewsInfo.selectDate = syNewsTimeHelper.getHoursMs($scope.timeMachineInfo.H)\n        } else {\n            $scope.selectOldNewsInfo.selectDate = syNewsTimeHelper.getDayMs(\n                new Date(2015, \n                $scope.timeMachineInfo.M - 1, \n                $scope.timeMachineInfo.D)\n            )\n        }\n        $scope.isShowTimeMachine = false\n    }\n    $scope.refreshNews = function(){\n        $scope.isOldNews\n        ? getSelectedDateNews($scope.selectOldNewsInfo)\n        : getSelectedDateNews($scope.selectNewsInfo)\n    }\n\n\n    /*******\n     * 監聽\n     *\n     *  `selectCountry` 刷新「當前新聞信息」並獲取相應新聞\n     *  `selectNewsInfo.selectDate` 刷新「上次瀏覽『新聞，』日期」並獲取「新聞，」\n     *  `selectOldNewsInfo.selectDate` 刷新「上次瀏覽『舊聞。』日期」並獲取「舊聞。」\n     *  `newBox` 滾動到頂部\n     */\n    $scope.$watch('selectCountry', function (newVal, oldVal){\n\n        if (newVal === oldVal){ return; }\n\n        $scope.selectNewsInfo.selectCountry = newVal\n        $scope.selectOldNewsInfo.selectCountry = newVal\n        $scope.refreshNews()\n    })\n    $scope.$watch('selectNewsInfo.selectDate', function (newVal, oldVal){\n\n        if (newVal === oldVal){ return; }\n\n        oneDayStore.set('lastNewsDate', $scope.selectNewsInfo.selectDate)\n        getSelectedDateNews($scope.selectNewsInfo)\n    })\n    $scope.$watch('selectOldNewsInfo.selectDate', function (newVal, oldVal){\n\n        if (newVal === oldVal){ return; }\n\n        store.set('lastOldNewsDate', $scope.selectOldNewsInfo.selectDate)\n        getSelectedDateNews($scope.selectOldNewsInfo)\n    })\n    $scope.$watch('newsBox', function (newVal, oldVal){\n\n        if (newVal === oldVal){ return; }\n\n        document.getElementsByClassName('newsBox__news')[0].scrollTop = 0\n    })\n\n    /*********\n     * Helper\n     *\n     *  `setSelectNewsState` 設置 `$scope.newsBox`, `$scope.isShow` & `$scope.isNewsExist`\n     *  `getSelectedDateNews` 獲取選擇時段／日期的新聞\n     *  `checkSelectNewsCaret` 檢測是否顯示選擇新聞按鈕\n     *  `storeOneDayNews` 存储新闻与本地並設置過期時間\n     *  `removeOneDayNews` 清除過期的新聞\n     */\n    checkSelectNewsCaret()\n    getSelectedDateNews($scope.selectNewsInfo)\n\n    function setSelectNewsState(data, isShow, isNewsExist){\n        $scope.newsBox     = data\n        $scope.isShow      = isShow\n        $scope.isNewsExist = isNewsExist\n    }\n    function getSelectedDateNews(selectData, isPreload){\n        $scope.isOldNews\n        ? checkSelectOldNewsCaret()\n        : checkSelectNewsCaret()\n\n        var newsID = selectData.selectDate + $scope.selectCountry,\n            cache_data;\n\n        if (isPreload){\n            // 取消預加載此新聞\n            if (lastStep === 1 && $scope.isHideCaretRight || lastStep === -1 && $scope.isHideCaretLeft ){\n                return;\n            }\n        } else {\n            setSelectNewsState([], false, true)\n        }\n\n        // 尝试从本地获取新闻\n        cache_data = selectData.isAllDay\n        ? newsBoxCache[newsID]\n        : oneDayStore.get(newsID)\n        if (cache_data){\n            isPreload\n            ? null\n            : setSelectNewsState(cache_data, true, true)\n\n            return;\n        }\n        // 否则，從服務器获取新闻\n        $http\n        .post('/api/getSelectedDateNews', selectData)\n        .success(function (data, status, headers, config){\n            if (config.data.isAllDay){\n                newsBoxCache[newsID] = data.msg\n            } else {\n                storeOneDayNews(newsID, data.msg)\n            }\n            if (isPreload){ return; }\n            setSelectNewsState(data.msg, true, true)\n        })\n        .error(function (data, status, headers, config){\n            if (isPreload){ return; }\n            setSelectNewsState([], true, false)\n        })\n    }\n    function checkSelectNewsCaret(){\n        var selectDate = $scope.selectNewsInfo.selectDate\n        // 小於今日 0 時\n        $scope.isHideCaretLeft = selectDate - 3600000 === syNewsTimeHelper.getDayMs(new Date())\n        ? true\n        : false\n        // 大於現在時間\n        $scope.isHideCaretRight = selectDate + 3600000 > Date.now()\n        ? true\n        : false\n    }\n    function checkSelectOldNewsCaret(){\n        var selectDate = $scope.selectOldNewsInfo.selectDate\n        $scope.isHideCaretLeft = false\n        // 大於今日\n        $scope.isHideCaretRight = selectDate + 172800000 > Date.now()\n        ? true\n        : false\n    }\n    function storeOneDayNews(newsID, news){\n        oneDayStore.set(newsID, news)\n        var tomorrow = Date.now() + 86400000\n        store.set('oneDayNewsExpires', syNewsTimeHelper.getDayMs(tomorrow))\n    }\n    function removeOneDayNews(){\n        var ls = $window.localStorage,\n            len = localStorage.length,\n            reg = /^one-day-news-/,\n            j = 0;\n        for (var i = 0; i < len; i++){\n            reg.test(ls.key(j))\n            ? store.remove(ls.key(j))\n            : j ++\n        }\n    }\n}])","angular.module('ShinyaNews.i18nDirective', [])\n.directive('syNewsI18n', function (){\n    return {\n        restrict: 'E',\n        replace : true,\n        template: '<div class=\"corner--top--left animate--faster\">'\n                +   '<div ng-repeat=\"country in countryList\" class=\"toolBar__button--country animate--faster\" ng-class=\"country\" ng-click=\"changeLanguage(country)\">'\n                +       '{{country}}'\n                +   '</div>'\n                + '</div>',\n        controller: ['$scope', '$timeout', 'store', function ($scope, $timeout, store){\n\n            var country_list = ['HK', 'CN', 'JP', 'TW', 'US', 'BR', 'IN', 'KR', 'RU', 'DE', 'FR']\n\n            $scope.countryList = [$scope.selectCountry]\n            $scope.changeLanguage = function (country){\n                var country_len = $scope.countryList.length,\n                    index = country_list.indexOf(country);\n                if (country === $scope.countryList[0]){\n                    // 顯示／隱藏「國家列表」\n                    country_list.length === country_len\n                    ? hideCountryList(country)\n                    : showCountryList()\n                } else {\n                    // 更改國家\n                    store.set('syNewsCountry', country)\n                    $scope.selectCountry = country\n                    hideCountryList(country)\n                }\n            }\n            function showCountryList(){\n                for (var i = 0; i < country_list.length; i++){\n\n                    var cache = $scope.countryList,\n                        len   = cache.length - 1;\n\n                    cache[0] !== country_list[i]\n                    ? cache.push(country_list[i])\n                    : null\n\n                    $scope.countryList = cache\n                }\n            }\n            function hideCountryList(country){\n                var cache = $scope.countryList,\n                    len   = cache.length - 1,\n                    index = cache.indexOf(country);\n\n                cache.splice(index, 1)\n                cache.unshift(country)\n                $scope.countryList = cache\n\n                $timeout(function (){\n                    if (country === cache[0]){\n                        $scope.countryList = [country]\n                    }\n                })\n            }\n        }]\n    }\n})","angular.module('ShinyaNews.stopPropagationDirective', [])\n.directive('syNewsStopPropagation', function (){\n    return {\n        restrict: 'A',\n        link: function (scope, elem, attr){\n            elem.bind('click', function (e){\n                e.stopPropagation()\n            })\n            elem.bind('touchstart', function (e){\n                e.stopPropagation()\n            })\n        }\n    }\n})","angular.module('ShinyaNews.timeHelperServices', [])\n.service('syNewsTimeHelper', function(){\n\n    this.getHoursMs = function(hour){\n        var date = new Date()\n        return  Date.parse(\n                    new Date(\n                            date.getFullYear(),\n                            date.getMonth(),\n                            date.getDate(),\n                            hour\n                        )\n                )\n    },\n    this.getDayMs = function(date){\n        var date = new Date(date)\n        return  Date.parse(\n                    new Date(\n                            date.getFullYear(),\n                            date.getMonth(),\n                            date.getDate()\n                        )\n                )\n    }\n})"],"sourceRoot":"/source/"}